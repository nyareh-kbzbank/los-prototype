import{a as i,p as C}from"./middleware-fIKtS8xN.js";const m=["==","!=",">","<",">=","<=","between","in","notin","contains"],c={scoreCardId:"SC-NEW-01",name:"New Scorecard",maxScore:100,fields:[{field:"age",description:"Age",rules:[{field:"age",operator:"between",value:"20,39",score:10},{field:"age",operator:"between",value:"40,60",score:15}]},{field:"monthlyIncome",description:"Monthly Income",rules:[{field:"monthlyIncome",operator:">",value:"50000",score:20}]}]},l=o=>o.replace(/[_-]+/g," ").replace(/([a-z0-9])([A-Z])/g,"$1 $2").replace(/\s+/g," ").trim().replace(/^./,s=>s.toUpperCase()),a=o=>{const s=(o.fields??[]).map(e=>{const d=e.description?.trim()||l(e.field),r=(e.rules??[]).map(t=>({...t,field:e.field}));return{...e,description:d,rules:r}});if(!s.length&&o.rules){const e=o.rules,d={};for(const r of e){const t=l(r.field);d[r.field]||(d[r.field]={field:r.field,description:t,rules:[]}),d[r.field].rules.push({...r,field:r.field})}return{...o,fields:Object.values(d)}}return{...o,fields:s}},I=i()(C(o=>({scoreCards:{[c.scoreCardId]:a(c)},selectedScoreCardId:c.scoreCardId,upsertScoreCard:(s,e)=>o(d=>{const r=a(s);return{scoreCards:{...d.scoreCards,[r.scoreCardId]:r},selectedScoreCardId:e?.select===!1?d.selectedScoreCardId:r.scoreCardId}}),removeScoreCard:s=>o(e=>{const{[s]:d,...r}=e.scoreCards,t=Object.keys(r),n=e.selectedScoreCardId===s?t[0]??c.scoreCardId:e.selectedScoreCardId;return{scoreCards:t.length===0?{[c.scoreCardId]:a(c)}:r,selectedScoreCardId:n}}),selectScoreCard:s=>o(e=>e.scoreCards[s]?{selectedScoreCardId:s}:e),resetStore:()=>o({scoreCards:{[c.scoreCardId]:a(c)},selectedScoreCardId:c.scoreCardId})}),{name:"loan-scorecard",version:5,migrate:o=>{const s=o,e={};for(const[r,t]of Object.entries(s?.scoreCards??{}))e[r]=a(t);const d=e[s?.selectedScoreCardId??""]?s?.selectedScoreCardId:Object.keys(e)[0]??c.scoreCardId;return{scoreCards:Object.keys(e).length>0?e:{[c.scoreCardId]:a(c)},selectedScoreCardId:d}}}));export{m as o,I as u};
