import{a as u,p as d}from"./middleware-fIKtS8xN.js";import{v as m}from"./v4-EwEgHOG0.js";const y=u()(d((t,o)=>({setups:{},addSetup:e=>{const r=(e.channels??[]).map(a=>({name:a.name.trim(),code:a.code.trim()})).filter(a=>a.name||a.code),l={id:m(),createdAt:Date.now(),product:{...e.product,tenureMonths:[...e.product.tenureMonths]},channels:r,scorecardId:e.scorecardId??null,scorecardName:e.scorecardName??null,workflowId:e.workflowId??null,workflowName:e.workflowName??null,riskGrade:e.riskResult?.riskGrade??null,totalScore:e.riskResult?.totalScore??null,disbursementType:e.disbursementType??"FULL",partialInterestRate:e.disbursementType==="PARTIAL"?e.partialInterestRate??null:null,disbursementDestinations:(e.disbursementDestinations??[]).filter(a=>a?.type==="BANK"||a?.type==="WALLET"),repaymentPlanId:e.repaymentPlan?.planId??null,repaymentPlanName:e.repaymentPlan?.name??null,repaymentPlan:e.repaymentPlan?{...e.repaymentPlan}:null,bureauCheckRequired:e.bureauCheckRequired||!1,bureauConsentRequired:e.bureauConsentRequired||!1,bureauProvider:e.bureauProvider||null,bureauPurpose:e.bureauPurpose||null};return t(a=>({setups:{...a.setups,[l.id]:l}})),l},updateSetup:(e,r)=>{const l=o().setups[e];if(!l)return;const a=(r.channels??[]).map(s=>({name:s.name.trim(),code:s.code.trim()})).filter(s=>s.name||s.code),n={...l,product:{...r.product,tenureMonths:[...r.product.tenureMonths]},channels:a,scorecardId:r.scorecardId??null,scorecardName:r.scorecardName??null,workflowId:r.workflowId??null,workflowName:r.workflowName??null,riskGrade:r.riskResult?.riskGrade??l.riskGrade,totalScore:r.riskResult?.totalScore??l.totalScore,disbursementType:r.disbursementType??"FULL",partialInterestRate:r.disbursementType==="PARTIAL"?r.partialInterestRate??null:null,disbursementDestinations:(r.disbursementDestinations??[]).filter(s=>s?.type==="BANK"||s?.type==="WALLET"),repaymentPlanId:r.repaymentPlan?.planId??null,repaymentPlanName:r.repaymentPlan?.name??null,repaymentPlan:r.repaymentPlan?{...r.repaymentPlan}:null,bureauCheckRequired:r.bureauCheckRequired||!1,bureauConsentRequired:r.bureauConsentRequired||!1,bureauProvider:r.bureauProvider||null,bureauPurpose:r.bureauPurpose||null};t(s=>({setups:{...s.setups,[e]:n}}))},resetStore:()=>t({setups:{}})}),{name:"loan-workflow-setups",version:1,partialize:t=>({setups:t.setups})}));function p(t){return Object.values(t).sort((o,e)=>e.createdAt-o.createdAt)}export{p as g,y as u};
