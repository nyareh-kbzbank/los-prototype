import{r as d,j as e}from"./main-CxpZHTDM.js";function O(){const[f,E]=d.useState(1e5),[g,C]=d.useState(10),[y,D]=d.useState(12),[v,k]=d.useState("months"),[i,R]=d.useState("reducing"),[N,B]=d.useState(5),[w,F]=d.useState(12),[M,A]=d.useState(30),{emi:U,totalPayment:z,totalInterest:K,schedule:S}=d.useMemo(()=>{const t=f??0,x=(g??0)/12/100,n=v==="years"?(y??0)*12:y??0;if(t<=0||n<=0)return{emi:0,totalPayment:0,totalInterest:0,schedule:[]};const u=[];let c=t;const p=new Date;if((g??0)<=0){const l=t/n;for(let a=1;a<=n;a++){c-=l;const s=new Date(p);s.setMonth(p.getMonth()+a),u.push({period:a,date:s,payment:l,principal:l,interest:0,balance:Math.max(0,c)})}return{emi:l,totalPayment:t,totalInterest:0,schedule:u}}const j=t*x*(1+x)**n/((1+x)**n-1),P=l=>{let a=0;for(let s=1;s<=n;s++){const r=l(s),o=c*x,b=Math.max(0,r-o);c-=b,s===n&&c<1&&(c=0);const h=new Date(p);h.setMonth(p.getMonth()+s),u.push({period:s,date:h,payment:r,principal:b,interest:o,balance:Math.max(0,c)}),a+=r}return{totalPaid:a,interestTotal:a-t}};if(i==="flat"){const l=(g??0)/100,a=t*l*(n/12),s=t+a,r=s/n;for(let o=1;o<=n;o++){const b=a/n,h=t/n;c-=h;const T=new Date(p);T.setMonth(p.getMonth()+o),u.push({period:o,date:T,payment:r,principal:h,interest:b,balance:Math.max(0,c)})}return{emi:r,totalPayment:s,totalInterest:a,schedule:u}}if(i==="step-up"||i==="step-down"){const l=(N??0)/100,a=Math.max(1,w??1),s=i==="step-up"?1:-1,r=P(o=>{const b=Math.floor((o-1)/a),h=1+s*l*b;return Math.max(0,j*h)});return{emi:j,totalPayment:r.totalPaid,totalInterest:r.interestTotal,schedule:u}}if(i==="balloon"){const l=t*((M??0)/100),a=Math.max(0,t-l),s=a===0?0:a*x*(1+x)**n/((1+x)**n-1),r=P(o=>o===n?s+l:s);return{emi:s,totalPayment:r.totalPaid,totalInterest:r.interestTotal,schedule:u}}const I=P(()=>j);return{emi:j,totalPayment:I.totalPaid,totalInterest:I.interestTotal,schedule:u}},[f,g,y,v,i,N,w,M]),m=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"MMK",minimumFractionDigits:2,maximumFractionDigits:2}).format(t);return e.jsxs("div",{className:"p-6 font-sans max-w-7xl mx-auto",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"EMI Calculator"}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-4 border p-6 rounded-lg shadow-sm bg-white h-fit",children:[e.jsx("h2",{className:"font-semibold text-lg mb-4",children:"Loan Details"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700",children:"EMI Type"}),e.jsxs("select",{value:i,onChange:t=>R(t.target.value),className:"w-full border p-2 rounded bg-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"reducing",children:"Reducing Balance"}),e.jsx("option",{value:"flat",children:"Flat Rate"}),e.jsx("option",{value:"step-up",children:"Step-Up"}),e.jsx("option",{value:"step-down",children:"Step-Down"}),e.jsx("option",{value:"balloon",children:"Balloon"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700",children:"Loan Amount"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-2 text-gray-500",children:"MMK"}),e.jsx("input",{type:"number",min:"0",value:f??"",onChange:t=>E(t.target.value?Number(t.target.value):void 0),className:"w-full border p-2 pl-14 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700",children:"Interest Rate (%)"}),e.jsx("input",{type:"number",min:"0",step:"0.1",value:g??"",onChange:t=>C(t.target.value?Number(t.target.value):void 0),className:"w-full border p-2 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700",children:"Tenure"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",min:"1",value:y??"",onChange:t=>D(t.target.value?Number(t.target.value):void 0),className:"flex-1 border p-2 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsxs("select",{value:v,onChange:t=>k(t.target.value),className:"border p-2 rounded bg-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"months",children:"Months"}),e.jsx("option",{value:"years",children:"Years"})]})]})]})]}),e.jsxs("div",{className:"space-y-4 border p-6 rounded-lg shadow-sm bg-blue-50 h-fit",children:[e.jsx("h2",{className:"font-semibold text-lg mb-4 text-blue-900",children:"Summary"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-blue-100",children:[e.jsx("span",{className:"text-gray-600",children:"Monthly EMI"}),e.jsx("span",{className:"text-2xl font-bold text-blue-600",children:m(U)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Principal Amount"}),e.jsx("span",{className:"font-medium",children:m(f??0)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Total Interest"}),e.jsx("span",{className:"font-medium text-orange-600",children:m(K)})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-blue-200",children:[e.jsx("span",{className:"font-semibold text-gray-800",children:"Total Payment"}),e.jsx("span",{className:"font-bold text-gray-900",children:m(z)})]})]})]}),(i==="step-up"||i==="step-down")&&e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700",children:"Step Change (%)"}),e.jsx("input",{type:"number",min:"0",step:"0.1",value:N??"",onChange:t=>B(t.target.value?Number(t.target.value):void 0),className:"w-full border p-2 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700",children:"Step Every (Months)"}),e.jsx("input",{type:"number",min:"1",value:w??"",onChange:t=>F(t.target.value?Number(t.target.value):void 0),className:"w-full border p-2 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),i==="balloon"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700",children:"Balloon Amount (% of Principal)"}),e.jsx("input",{type:"number",min:"0",max:"100",step:"1",value:M??"",onChange:t=>A(t.target.value?Number(t.target.value):void 0),className:"w-full border p-2 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),S.length>0&&e.jsxs("div",{className:"mt-8",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Payment Schedule"}),e.jsx("div",{className:"border rounded-lg overflow-x-auto shadow-sm bg-white",children:e.jsxs("table",{className:"min-w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-gray-100 text-gray-700 font-semibold border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 whitespace-nowrap",children:"#"}),e.jsx("th",{className:"px-4 py-3 whitespace-nowrap",children:"Payment Date"}),e.jsx("th",{className:"px-4 py-3 text-right whitespace-nowrap",children:"Payment"}),e.jsx("th",{className:"px-4 py-3 text-right whitespace-nowrap",children:"Principal"}),e.jsx("th",{className:"px-4 py-3 text-right whitespace-nowrap",children:"Interest"}),e.jsx("th",{className:"px-4 py-3 text-right whitespace-nowrap",children:"Outstanding"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:S.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2 text-gray-500",children:t.period}),e.jsx("td",{className:"px-4 py-2",children:new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(t.date)}),e.jsx("td",{className:"px-4 py-2 text-right font-medium",children:m(t.payment)}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-600",children:m(t.principal)}),e.jsx("td",{className:"px-4 py-2 text-right text-orange-600",children:m(t.interest)}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-500",children:m(t.balance)})]},t.period))})]})})]})]})}export{O as component};
