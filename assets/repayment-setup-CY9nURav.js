import{r as o,j as e,L as d}from"./main-CxpZHTDM.js";import{u as m}from"./repayment-setup-store-bJA9caMp.js";import"./middleware-CR244-OE.js";import"./v4-EwEgHOG0.js";const c={name:"",description:"",method:"EMI",frequency:"MONTHLY",dueDayOfMonth:5,firstDueAfterDays:30,gracePeriodDays:5,lateFeeFlat:0,lateFeePct:0,prepaymentPenaltyPct:0,autopayRequired:!1,roundingStep:100,minInstallmentAmount:null};function j(){const p=m(a=>a.addPlan),[s,t]=o.useState(c),[n,r]=o.useState(null),i=a=>{a.preventDefault(),r(null);try{const l=p({...s,name:s.name.trim(),description:s.description?.trim()||""});t(c)}catch(l){r(l instanceof Error?l.message:"Unable to save plan")}};return e.jsxs("div",{className:"p-6 font-sans max-w-5xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Repayment Setup"}),e.jsx("p",{className:"text-sm text-gray-700",children:"Define repayment plans that can be reused in Loan Setup."})]}),e.jsx(d,{to:"/loan/setup",className:"text-sm border px-3 py-1 rounded hover:bg-gray-50",children:"Back to Loan Setup"})]}),e.jsx("div",{className:"grid gap-6",children:e.jsxs("section",{className:"border p-4 rounded",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"font-semibold",children:"New repayment plan"}),e.jsx(d,{to:"/loan/repayment-plans",className:"text-sm border px-3 py-1 rounded hover:bg-gray-50",children:"View saved plans"})]}),e.jsxs("form",{className:"space-y-3",onSubmit:i,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:[e.jsx("span",{children:"Name"}),e.jsx("input",{type:"text",value:s.name,onChange:a=>t(l=>({...l,name:a.target.value})),className:"border px-2 py-2 rounded",placeholder:"e.g. Monthly EMI",required:!0})]}),e.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:[e.jsx("span",{children:"Method"}),e.jsxs("select",{value:s.method,onChange:a=>t(l=>({...l,method:a.target.value})),className:"border px-2 py-2 rounded",children:[e.jsx("option",{value:"EMI",children:"EMI (amortized)"}),e.jsx("option",{value:"INTEREST_ONLY",children:"Interest only"}),e.jsx("option",{value:"BULLET",children:"Bullet"})]})]}),e.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:[e.jsx("span",{children:"Frequency"}),e.jsxs("select",{value:s.frequency,onChange:a=>t(l=>({...l,frequency:a.target.value})),className:"border px-2 py-2 rounded",children:[e.jsx("option",{value:"WEEKLY",children:"Weekly"}),e.jsx("option",{value:"BIWEEKLY",children:"Bi-weekly"}),e.jsx("option",{value:"MONTHLY",children:"Monthly"}),e.jsx("option",{value:"QUARTERLY",children:"Quarterly"})]})]}),e.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:[e.jsx("span",{children:"Due day (1-28, monthly)"}),e.jsx("input",{type:"number",min:1,max:28,value:s.dueDayOfMonth??"",onChange:a=>t(l=>({...l,dueDayOfMonth:a.target.value?Number(a.target.value):null})),className:"border px-2 py-2 rounded",placeholder:"e.g. 5"})]}),e.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:[e.jsx("span",{children:"First due after (days)"}),e.jsx("input",{type:"number",min:0,value:s.firstDueAfterDays??"",onChange:a=>t(l=>({...l,firstDueAfterDays:Number(a.target.value)})),className:"border px-2 py-2 rounded",placeholder:"30"})]}),e.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:[e.jsx("span",{children:"Grace period (days)"}),e.jsx("input",{type:"number",min:0,value:s.gracePeriodDays??"",onChange:a=>t(l=>({...l,gracePeriodDays:Number(a.target.value)})),className:"border px-2 py-2 rounded",placeholder:"5"})]}),e.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:[e.jsx("span",{children:"Late fee flat"}),e.jsx("input",{type:"number",min:0,value:s.lateFeeFlat??"",onChange:a=>t(l=>({...l,lateFeeFlat:Number(a.target.value)})),className:"border px-2 py-2 rounded",placeholder:"0"})]}),e.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:[e.jsx("span",{children:"Late fee (%)"}),e.jsx("input",{type:"number",step:.1,min:0,value:s.lateFeePct??"",onChange:a=>t(l=>({...l,lateFeePct:Number(a.target.value)})),className:"border px-2 py-2 rounded",placeholder:"1"})]}),e.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:[e.jsx("span",{children:"Prepayment penalty (%)"}),e.jsx("input",{type:"number",step:.1,min:0,value:s.prepaymentPenaltyPct??"",onChange:a=>t(l=>({...l,prepaymentPenaltyPct:Number(a.target.value)})),className:"border px-2 py-2 rounded",placeholder:"2"})]}),e.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:[e.jsx("span",{children:"Rounding step"}),e.jsx("input",{type:"number",min:1,value:s.roundingStep??"",onChange:a=>t(l=>({...l,roundingStep:Number(a.target.value)})),className:"border px-2 py-2 rounded",placeholder:"100"})]}),e.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:[e.jsx("span",{children:"Min installment amount"}),e.jsx("input",{type:"number",min:0,value:s.minInstallmentAmount??"",onChange:a=>t(l=>({...l,minInstallmentAmount:a.target.value?Number(a.target.value):null})),className:"border px-2 py-2 rounded",placeholder:"optional"})]}),e.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:s.autopayRequired,onChange:a=>t(l=>({...l,autopayRequired:a.target.checked})),className:"accent-blue-600"}),e.jsx("span",{children:"Autopay required"})]})]}),e.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:[e.jsx("span",{children:"Description"}),e.jsx("textarea",{value:s.description,onChange:a=>t(l=>({...l,description:a.target.value})),className:"border px-2 py-2 rounded",rows:3,placeholder:"Notes for ops team"})]}),n&&e.jsx("div",{className:"text-sm text-red-700 bg-red-50 border border-red-200 rounded p-2",children:n}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",className:"bg-emerald-600 text-white px-4 py-2 rounded hover:bg-emerald-700",children:"Save plan"})})]})]})})]})}export{j as component};
