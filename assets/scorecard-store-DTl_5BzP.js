import{a as i,p as l}from"./middleware-DbOJw5Dy.js";const m=["==","!=",">","<",">=","<=","between","in","notin","contains"],t={scoreCardId:"SC-NEW-01",name:"New Scorecard",maxScore:100,fields:[{field:"age",description:"Age",rules:[{field:"age",operator:"between",value:"20,39",score:10},{field:"age",operator:"between",value:"40,60",score:15}]},{field:"monthlyIncome",description:"Monthly Income",rules:[{field:"monthlyIncome",operator:">",value:"50000",score:20}]}],bureauProvider:"Experian",bureauPurpose:"Credit assessment",bureauConsentRequired:!0},n=r=>r.replace(/[_-]+/g," ").replace(/([a-z0-9])([A-Z])/g,"$1 $2").replace(/\s+/g," ").trim().replace(/^./,o=>o.toUpperCase()),c=r=>{const o=(r.fields??[]).map(e=>{const d=e.description?.trim()||n(e.field),s=(e.rules??[]).map(a=>({...a,field:e.field}));return{...e,description:d,rules:s}});if(!o.length&&r.rules){const e=r.rules,d={};for(const s of e){const a=n(s.field);d[s.field]||(d[s.field]={field:s.field,description:a,rules:[]}),d[s.field].rules.push({...s,field:s.field})}return{...r,fields:Object.values(d),bureauProvider:r.bureauProvider??"Experian",bureauPurpose:r.bureauPurpose??"Credit assessment",bureauConsentRequired:r.bureauConsentRequired??!0}}return{...r,fields:o,bureauProvider:r.bureauProvider??"Experian",bureauPurpose:r.bureauPurpose??"Credit assessment",bureauConsentRequired:r.bureauConsentRequired??!0}},f=i()(l(r=>({scoreCards:{[t.scoreCardId]:c(t)},selectedScoreCardId:t.scoreCardId,upsertScoreCard:(o,e)=>r(d=>{const s=c(o);return{scoreCards:{...d.scoreCards,[s.scoreCardId]:s},selectedScoreCardId:e?.select===!1?d.selectedScoreCardId:s.scoreCardId}}),removeScoreCard:o=>r(e=>{const{[o]:d,...s}=e.scoreCards,a=Object.keys(s),u=e.selectedScoreCardId===o?a[0]??t.scoreCardId:e.selectedScoreCardId;return{scoreCards:a.length===0?{[t.scoreCardId]:c(t)}:s,selectedScoreCardId:u}}),selectScoreCard:o=>r(e=>e.scoreCards[o]?{selectedScoreCardId:o}:e),resetStore:()=>r({scoreCards:{[t.scoreCardId]:c(t)},selectedScoreCardId:t.scoreCardId})}),{name:"loan-scorecard",version:5,migrate:r=>{const o=r,e={};for(const[s,a]of Object.entries(o?.scoreCards??{}))e[s]=c(a);const d=e[o?.selectedScoreCardId??""]?o?.selectedScoreCardId:Object.keys(e)[0]??t.scoreCardId;return{scoreCards:Object.keys(e).length>0?e:{[t.scoreCardId]:c(t)},selectedScoreCardId:d}}}));export{m as o,f as u};
