import{a as u,p as d}from"./middleware-CUWq0KxS.js";import{v as m}from"./v4-EwEgHOG0.js";var c=(a=>(a.MONTH="Month",a.YEAR="YEAR",a.DAY="DAY",a))(c||{});const p=u()(d((a,n)=>({setups:{},addSetup:e=>{const r=(e.channels??[]).map(l=>({name:l.name.trim(),code:l.code.trim()})).filter(l=>l.name||l.code),o={id:m(),createdAt:Date.now(),product:{...e.product,loanTenor:{...e.product.loanTenor,TenorValue:[...e.product.loanTenor.TenorValue]}},channels:r,scorecardId:e.scorecardId??null,scorecardName:e.scorecardName??null,workflowId:e.workflowId??null,workflowName:e.workflowName??null,riskGrade:e.riskResult?.riskGrade??null,totalScore:e.riskResult?.totalScore??null,disbursementType:e.disbursementType??"FULL",partialInterestRate:e.disbursementType==="PARTIAL"?e.partialInterestRate??null:null,disbursementDestinations:(e.disbursementDestinations??[]).filter(l=>l?.type==="BANK"||l?.type==="WALLET"),repaymentPlanId:e.repaymentPlan?.planId??null,repaymentPlanName:e.repaymentPlan?.name??null,repaymentPlan:e.repaymentPlan?{...e.repaymentPlan}:null,bureauCheckRequired:e.bureauCheckRequired||!1,bureauConsentRequired:e.bureauConsentRequired||!1,bureauProvider:e.bureauProvider||null,bureauPurpose:e.bureauPurpose||null};return a(l=>({setups:{...l.setups,[o.id]:o}})),o},updateSetup:(e,r)=>{const o=n().setups[e];if(!o)return;const l=(r.channels??[]).map(s=>({name:s.name.trim(),code:s.code.trim()})).filter(s=>s.name||s.code),t={...o,product:{...r.product,loanTenor:{...r.product.loanTenor,TenorValue:[...r.product.loanTenor.TenorValue]}},channels:l,scorecardId:r.scorecardId??null,scorecardName:r.scorecardName??null,workflowId:r.workflowId??null,workflowName:r.workflowName??null,riskGrade:r.riskResult?.riskGrade??o.riskGrade,totalScore:r.riskResult?.totalScore??o.totalScore,disbursementType:r.disbursementType??"FULL",partialInterestRate:r.disbursementType==="PARTIAL"?r.partialInterestRate??null:null,disbursementDestinations:(r.disbursementDestinations??[]).filter(s=>s?.type==="BANK"||s?.type==="WALLET"),repaymentPlanId:r.repaymentPlan?.planId??null,repaymentPlanName:r.repaymentPlan?.name??null,repaymentPlan:r.repaymentPlan?{...r.repaymentPlan}:null,bureauCheckRequired:r.bureauCheckRequired||!1,bureauConsentRequired:r.bureauConsentRequired||!1,bureauProvider:r.bureauProvider||null,bureauPurpose:r.bureauPurpose||null};a(s=>({setups:{...s.setups,[e]:t}}))},resetStore:()=>a({setups:{}})}),{name:"loan-workflow-setups",version:1,partialize:a=>({setups:a.setups})}));function P(a){return Object.values(a).sort((n,e)=>e.createdAt-n.createdAt)}export{c as T,P as g,p as u};
